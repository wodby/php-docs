<div role="navigation" aria-label="breadcrumbs navigation">  
  <ul class="wy-breadcrumbs grv-nav-versions"> </ul>                    
  <hr/>

  <script type="text/javascript">

    $(function(){               
        window.docVersions = window.docVersions || [];
        var grv_current_ver = "{{ config.extra.version }}"
        grv_current_ver = grv_current_ver || 'Current';

        function removeDoubleSlash(str){
            return str.replace(/\/\/+/g, '/');
        }

        function getVerUrl(currentVer, ver){
            var suffix = currentVer + '/' +mkdocs_page_url;
            suffix = removeDoubleSlash(suffix);
            var index = window.location.href.indexOf(suffix);            
            var baseUrl = window.location.href.substr(0, index);            
            return baseUrl + removeDoubleSlash(ver + "/" + mkdocs_page_url);
        }

        function isCurrent(ver){            
            let tmp = ver + '/' + mkdocs_page_url;
            tmp = removeDoubleSlash(tmp);
            return window.location.href.indexOf(tmp) !== -1;            
        }
        
        function getCurVer(){
            for(var i = 0; i < docVersions.length; i++){
                var ver = docVersions[i];
                if(isCurrent(ver)){
                    return ver;
                }
            }

            return grv_current_ver;
        }

        var currentVer = getCurVer();        
        var $ul = $(".grv-nav-versions");

        $ul.append("<li>Version&nbsp;</li>");
                            
        if(docVersions.length === 0){
            $ul.append('<li class="grv-current-ver"> ' + currentVer + '</li>');            
        }

        for(var i = 0; i < docVersions.length; i++){
            var ver = docVersions[i];                        
            var $li = null;
            if(ver === currentVer){
                $li = $('<li class="grv-current-ver"> ' + ver + '</li>');
            }else{
                var baseUrl = getVerUrl(currentVer, ver);
                $li = $('<li class="grv-ver"> <a href="' +baseUrl+'"> ' + ver + '</a></li>');
            }

            $ul.append($li);
        }

        $ul.append('<li class="wy-breadcrumbs-aside"> <a href="https://cloud.wodby.com/stackhub/ada51e9b-2204-45ee-8e49-a4151912a168/overview">Go to Drupal 8 stack page</a>  </li>');
    });
       
   </script>
</div>
